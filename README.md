# IP Downloader Mock

Краткое описание :

Мок для тестирования скачивания файлов. Можно запускать как через Dockerfile, так и просто через скрипт mock.rb

 `ruby mock.rb`

Существует конфиг для сервиса (deploy/roles/dev_kube/vars/ipfeeds.yaml), примеры его настройки приведены в

ipfeeds_config_long  - выкачка фидов происходит раз в час (подходит для тестирования на больших данных, которые приведены в репозитории)

ipfeeds_config_short - выкачка фидов раз в 5 минут (подходит для тестирования на урезанных данных)


# Редактирование источника фидов для тестов

В основном все источники редактируются легко и очевидно за исключением azure и ip2location

## azure
Для azure существуют два файла azure и azure_xml_xml. В первом происходит поиск адреса для второго, он отсыелает его на 127.0.0.1:8888/azure_xml.
Во втором файле все очевидно.

## ip2location 
Как открыть файлы для редактирования

 `unzip IPv4 -d destination_folder`

Далее все очевидно, чтобы собрать все обратно в архив

`cd destination_folder`

`zip IPv4 IP2PROXY-IP-PROXYTYPE-COUNTRY.CSV LICENSE_AGREEMENT.PDF README.TXT`


# Примечания:

- GCE можно скачать с помощью скрипта GCE_subnetworks.sh
- Файлы фидов можно менять "на лету"
